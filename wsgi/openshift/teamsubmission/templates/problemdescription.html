{% extends 'base.html' %}
{% load link_tags %}
{% load fileprint %}
{% block content %}
<div class = "pull-right" >
<a href="{%Â url 'submission_page' contest.url %}" class="btn btn-primary btn-large">Go To Contest Page</a>
</div>

<h2>{{problem.title}}</h2>

<hr>

{% if not submission.solved_problem %}
<p> Attempts: <strong> {{ tries }} </strong> </p>
{% endif %}

{% if tries > 0 %}
<h3> Upload a new file to this problem </h3>
{% else %}
<h3> Upload a file for this problem </h3> 
{% endif %}

<form id="fileUpload" method="POST" action="" enctype="multipart/form-data">
    {% csrf_token %}
<div class = 'well'>

<p>1. Pick a compiler profile</p>
{{ submission_form.compilerProfile }} 
<br>
<br>	
<p>2. Pick the file you want to upload </p>
{{ submission_form.submission }}
 {% for field in submission_form %}
  	{% for error in field.errors %}
  	<span class="bg-warning"> {{error}} </span>
             <br>
             <br>
    {% endfor %}
 {% endfor %}
 <p>3. Submitt the file </p>
    <button type="submit" class = "btn btn-primary btn-sm">Submit file</button> 
    <br>
    <i> <small>Please note that by submitting a file it will count as an attempt</small></i>
</div>
    <h3> Feedback on submission </h3>
 <div class = 'well' >

{% if submission.solved_problem %}
	<strong><p>Problem solved! </strong></p>
	<p> Feedback: <strong>{{submission.text_feedback}} </strong></p>
	<p> Solution runtime: <strong> {{ submission.runtime }}</strong> ms </p>
	<p> Attempts: <strong> {{ tries }} </strong> </p>
{% elif submission.text_feedback %}
	<span class="bg-info">{{submission.text_feedback}}</span>
{% else %}
	<span class="bg-info"> No feedback </span>
{% endif %}
</div>
</form>
<h3>Problem Description </h3>
<hr> 
{% if problem.author %}
<i><small>Author: {{ problem.author.get_full_name }} .</i></small>
{% endif %}

<br>
{% if problem %}
    {{ problem.description }}
{% endif %}
<br />

{% endblock content %}
