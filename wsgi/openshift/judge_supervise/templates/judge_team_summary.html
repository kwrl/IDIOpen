{% extends "admin/app_index.html" %}

{# {% load link_tags %} #}
{# {% contest as contest %} #}

{% block content %}

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://code.jquery.com/jquery.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>

<!-- Tablesorter css -->
<link href="/static/openshift/css/tablesorter/tablestyle.css" rel="stylesheet">
<!--  Tablesorter and tooltip js -->
<script type="text/javascript" src="/static/openshift/js/tablesorter/jquery.tablesorter.js"></script> 
<script type="text/javascript" src="/static/openshift/js/tooltip.js"></script> 
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>

<h1>Overview of Team "{{team.name}}"</h1>

<style>
    .errorRow {
        background: #FFD1D1 !important;
    }

</style>

<h3>Submissions</h3>
<table id="tableSubs" class="table table-bordered table-hover table-condensed tablesorter">
	<thead>
            <tr>
            <th data-toggle="tooltip" data-placement="top" title="The team this regards">Date Uploaded</th>
            <th data-toggle="tooltip" data-placement="top" title="">Problem</th>
            <th data-toggle="tooltip" data-placement="top" title="What problem this is about">retval</th>
            </tr>
    </thead>
    <tbody>
            {% for listitem in sub_feed_items %}
            <tr id={{listitem.submissions.pk}} class='clickableRow parent' >
                {% if listitem.retval >= 1 %}
                <td class="errorRow" > {{listitem.date_uploaded}}</td>
                <td class="errorRow">{{listitem.problem}}</td>
                <td class="errorRow">{{listitem.retval}}</td>
                {% else %}
                <td> {{listitem.date_uploaded}}</td>
                <td>{{listitem.problem}}</td>
                <td>{{listitem.retval}}</td>
                {% endif %}
            </tr>
                <tr class="child-{{listitem.submissions.pk}}"> 
                    <td colspan=3> 
                         {# {{listitem.subtext }} #}
                         {# {{listitem.retval}} #}
                         <h2> Command: </h2>
                        <pre class="prettyprint linenums">
                            {{listitem.command}}
                        </pre>
                         {{listitem.stderr }}

                         <h2> Code:</h2>
                        <pre class="prettyprint linenums">
                        {{ listitem.file_content }} 
                        </pre>
                    </td>
                </tr>
            {% endfor %}
    </tbody>
</table>



{# <h3> Types of error responses </h3> #}
{# <table id="tableSubs" class="table table-bordered table-hover table-condensed tablesorter"> #}
{# 	<thead> #}
{#             <tr> #}
{#             <th data-toggle="tooltip" data-placement="top" title="The team this regards">Type of Feedback</th> #}
{#             <th data-toggle="tooltip" data-placement="top" title="What problem this is about">Total count</th> #}
{#             {% for prob in problems %} #}
{#             <th data-toggle="tooltip" data-placement="top" title="What problem this is about">{{prob}}</th> #}
{#             {% endfor %} #}
{#             </tr> #}
{#     </thead> #}
{#     <tbody> #}
{#             {% for listitem in prob_row  %} #}
{#             <tr class='clickableRow' href=''> #}
{#             <td>{{listitem.feedback}}</td> #}
{#             <td>{{listitem.total}}</td> #}
{#             {% for prob_count in listitem.prob_count_list %} #}
{#             <td> {{ prob_count }} </td> #}
{#             {% endfor %} #}
{#             {% endfor %} #}
{#     </tbody> #}
{# </table> #}
{#  #}



<script>
$(function() {
    $('tr.parent')
        .click(function(){
            $(this).siblings('.child-'+this.id).toggle();
            for(var i = 0; i < this.children.length; i++)
            {
                //this.children[i].style.background = "#B1FFFB";
                }
        });
    list = $(document.querySelectorAll('tr[class^="child-"]'))
    for(var i = 0; i < list.length; i++)
    {
        $(list[i]).hide().children('td');
    }

});
</script>



{% endblock content %}
