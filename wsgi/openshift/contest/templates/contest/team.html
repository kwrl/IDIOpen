{% extends 'base.html' %}
{% load i18n %}
{% load link_tags %}
{% block content %}

{% if team %}

	<div class="row">
		<div class="col-lg-7">
			<h2>Team page</h2>
		</div>
		<div class="col-lg-5">
		<div class="btn-group pull-right">
		{% if is_leader %}    
			<a href="{%Â url 'team_edit' contest.url %}" class="btn btn-primary btn-sm">{% trans 'Edit team' %}</a>
		{% endif %}
        {# btn btn-primary btn-sm pull-right">{% trans 'Leave team' %}</a> #}
		</div>
		</div>
	</div>
	<hr>
	<em><h3> {{ team.name }}</h3></em>
	<p class="text-muted">
	Location: 
	{% if team.onsite %}
		Onsite
	{% else %}
		{{ team.offsite }}
	{% endif %}
	</p>
	<p class="text-muted">
	Leader: 
	{{ team.leader.first_name }} {{ team.leader.last_name }} 
	</p>
	<hr>
	<em><h4>Members</h4></em>
	<table class="table table-striped">
      <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Email</th>
          <th>Skill</th>
          {% if is_leader %} 
          <th>Delete</th>
          {% endif %}
        </tr>
      </thead>
        <tbody>
        {% for member in team.members.all %}
        <tr>
          <td><a href="#">{{ member.first_name }}</a></td>
          <td><a href="#">{{ member.last_name }}</a></td>
          <td><a href="#">{{ member.email }}</a></td>
          <td>{{ member.skill_level }}</a></td>
          {% if is_leader %} 
          <td>
          {% if not member == team.leader %}
          	<a href="{% url 'team_delete_member' contest.url member.id %}">
          	<i class="fa fa-trash-o fa-lg text-danger"></i>
          {% endif %}
          </a></td>
          {% endif %}
        </tr>
		{% endfor %}
      </tbody>
    </table>
    {% if team.members.count >= 3 %}
    <small><em><p> Your team is full </p></em></small>
    {% endif %}
	{% if is_leader %}    
	<hr>
	<form class="form-horizontal" method="POST" action="" role="form">
	{% csrf_token %}
		<div class="form-group">
            {{ addMemberForm.email.errors }}
            <label for="{{ field.id_for_label }}" class="col-lg-3 control-label">
            {{ addMemberForm.email.label }}</label> 
            <div class="col-lg-5">
            {{ addMemberForm.email|addcss:"form-control"}}
            </div>
        </div>
	    <div class="form-group">
			<div class="col-lg-offset-3 col-lg-9">
				{% if team.members.count >= 3 %}
	  				<button type="submit" name='addMember' value="addMember" class="btn btn-default">{% trans 'Add new member' %}</button>
	  			{% else %}
	  				<button type="submit" name='addMember' value="addMember" class="btn btn-default">{% trans 'Add new member' %}</button>
	  			{% endif %}	
	  		</div>
  		</div>
	</form>
		<div class="btn-group pull-right">
			<a href=# id="LeaveButton" data-toggle="confirmation" class="alert btn btn-danger btn-sm">{% trans 'Leave team' %}</a>
		</div>

	{% endif %}
{% else %}
	<p> You are currently not member of any team. Want to participate in this contest? </p>
	<a href=" {% url 'register_teams' contest.url %}">Registrer Team </a>

{% endif %}	

{% endblock content %}
